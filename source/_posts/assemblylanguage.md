---
title: assemblylanguage
date: 2019-06-07 10:20:01
tags:
---
# 汇编语言
## 进制及码元
进制及码元是计算机重要的基础之一，计算机采用的是二进制数值或编码在各种汇编语言中习惯使用十六进制，也可以使用八进制、二进制和十进制
### 进制转换
进制的每个数据位取值范围为0~N-1逢N进一、借一等于N。
二进制只有0和1两个数，逢2进一，借1等于2
十六进制有0~9、A-F16个数字，逢16进1，借1等于16
### 进制计算
进制计算主要有加减乘除等算数运算和与或非等逻辑运算
### 码制及其转换
**BCD码**
常见的BCD码有8421码、2421码以及余3码等，一般使用8421码，8421码又分为压缩BCD码和非压缩BCD码

压缩BCD码是用四位二进制码表示一位十进制，一个字节可以表示两位十进制

非压缩BCD码用八位二进制代码表示一位十进制

**ASCII码**
 
基本ASCII码使用7位的二进制编码，占一个字节，最高位为0
### 原码、反码和补码
原码、反码和补码均为有符号数的编码，正、负也用二进制编码来表示，它们所表示的实际数值称为“真值或原值”。

原码是直接在真值的绝对值之前增加一个符号位，并取正数的符号为0，负数的符号位为1.正数的反码、补码与原码相同，负数的反码为原码的符号位不变其他位变反+1得到的。

**负数之间的三种编码之间的转换**

真值和原码相同

原码变为补码符号位不变其他位变反+1

补码变为反码-1

反码变为补码+1

原码变为反码符号位不变其他位变反

补码是计算机中最基本的有符号数编码的方案，最主要的原因是因为采用补码之后：减法可以变为加法5-3=5+(-3)；加减时符号位和数值一样参加计算。

### **二进制数据的表示范围**

二进制数据的表示范围要**分有符号数**还是**无符号数**

无符号数的所有二进制位均表示数值位

有符号数位的最高位代表符号位，1表示负，0代表正，其余位才是数值。

n位二进制位无符号数的表示范围是0~(2^n-1)。n位二进制有符号数的表示范围还取决于编码方案。

补码的为-2^n-1~+(2^n-1-1)

原码、反码的表示范围为-(2^n-1-1)~+(2^n-1-1)

---
计算机中内外存容量以字节为单位，一个字节由8个二进制位构成

8位二进制的无符号位表示范围是0~255，有符号位的表示范围是为-128~+127

16位二进制的无符号表示的范围为0~65535，有符号补码表示范围为-32768~+32767.
### **定点数和浮点数**
确定小数点的位置有两种约定
1. 定点数：规定小数点的位置不变
2. 浮点数：小数点的位置可以浮动

**定点数：**

对于定点数，小数点的位置可以固定在符号位之后，这样的机器表示的全是定点小数。假定机器的字长为16位，符号位占一位，数值占有15位。定点表示法的数值范围及精度有限，为了扩大定点数的表示范围或提高精度，可以采用多个字节来表示一个定点数

**浮点数：**

浮点数表示法就是小数点在数中的位置是浮动的。由于定点数表示的范围较窄，不能满足实际问题的需要因此采用浮点表示法。在同样字长情况下，浮点表示法能表示数的范围扩大了。

浮点表示法包括两个部分：一部分是**阶码**，另一部分是**尾数**。
 
尾数的绝对值总是小于1的数，它是给出了该浮点数的有效数字，尾数部分的数符确定了该浮点数的正负。阶码总是整数，它确定了小数点浮动的位数。若阶符为正尾数的小数点向右移动，若阶符为负小数点的位置向左移动。

**上溢**

在浮点数的表示和运算当中，当一个数的阶码大于机器所能表示的最大阶值的时候，产生“上溢”。

**下溢**

当一个数的阶码小于机器所能表示的最小阶码时，产生“下溢”。

---
## **寻址方法及指令系统**
指令是CPU可以理解并执行的操作命令。指令系统是某种CPU的所有指令的集合。不同的CPU有不同的指令系统，相互不一定兼容。

程序是为了解决某些问题而编写的有限指令序列，程序有三大特点：

目的性、有限性和有序性

计算机执行程序实质是CPU依次取出已存储在内存中的程序的各个指令并逐条执行的过程。

每一条指令的执行过程主要有取址和分析执行两个阶段。其中CPU中有一指令指针指向内存中待取指令存放的地址，其值在当前指令取出后会自动加1移向下一条指令。

大多数指令由操作码和操作数两部分构成，操作码用于指出指令所要实现的操作，操作数部分用于指出指令操作过程中所要用到的数据或者数据所存放的位置。

指令可分为两个级别：机器级和汇编级。

**机器指令：**

机器指令是指由二进制代码构成的可由CPU直接理解并执行的指令
机器指令是最难理解的，也是最难记忆的，书写容易出错。

**汇编指令**

汇编指令实质上是机器指令符号化的结果，它与机器指令是一对一的关系。

汇编指令则是用英文助记符代表操作码部分，对相应的符号代表操作数部分，相对来说易于理解和记忆，书写不容易出错。

给出操作数的方式叫操作数的寻址方式。根据操作对象存放位置可将操作数分为四类：
- 立即数(存于指令中)
- 寄存器操作数(存于寄存器中)
- 存储器操作数(存于存储器中)
- 端口操作数(存于端口中)

对应的操作寻址也分为四类
- 立即寻址式
- 寄存器寻址方式
- 存储器寻址方式
- 端口寻址方式

1. 操作数还可以根据在指令中的位置分为第一操作数、第二操作数和隐含操作数根据操作数的作用可以分为源操作数和目的操作数

2. 根据操作数所对应的操作对象的字节数分为字节操作数、字操作数、双字操作数、八字操作数和十字操作数

指令的执行一般是顺序执行，执行完一条指令之后接着执行物理上的下一条指令，但是有时候程序需要产生跳转，所以设置了一些转移指令。转移到某处的方法叫做转移寻址方式。

指令分类有不同的方式。按照操作数的个数将指令分为零地址指令、一地址指令、二地址指令和多地址指令

1. 指令按照级别分别为机器指令和汇编指令

2. 按照是否转移分为转移指令和顺序指令按功能分为七大类：传送类、算数运算类、CPU控制类、位操作类、I/O类、串操作类、CPU控制类和转移类

3. 按指令长度分为一字节指令、二字节指令……

4. 按照指令执行期间取操作数是否需要与总线打交道分为内部指令和外部指令

**操作数的寻址方式**

操作数的寻址方式主要有立即寻址方式、寄存器寻址方式、存储器寻址方式、端口寻址方式4类。
立即寻址
指令中包含的立即数对应的寻址方式叫立即寻址方式，操作对象就是这个操作数本身。汇编指令所涉及的立即数有：各种进制的常数、字符常量、符号常量、地址以及常数表达式等。
MOV指令是将第二个操作数0送给第一操作数

MOV AL，5     ;5 为十进制字节常数(";"为注解开始标志)

MOV AX，5     ;5 为十进制字常数

MOV AX， 300H ;300H 为十六制字节常数

MOV CX, N     ;再次之前 N已定义为常量

MOV AX,DATA   ;DATA为段名，即段地址

MOV AX,5+3*3  ;5+3*3=14 为常数表达式

立即数只能作为源操作数，不能作为目标操作数。立即数的数据类型可能是字节，也可能是字，由指令本身决定。
寄存器寻址
指令中出现的寄存器作为操作数的寻址方式叫寄存器寻址方式，操做对象实质上是寄存器中的内容。汇编指令所涉及的寄存器操作数共有20个 寄存器名。将其分为两类：段寄存器和通用寄存器。段寄存器有DS、ES、SS和CS四个，属于字节型，通用寄存器(UR)分为8位通用寄存器和16位通用寄存器，8位通用寄存器有AH、AL、BH、BL、CH、CL、DH和DL八个，属于字节类型；16位通用寄存器有AX、BX、CX、DX、BP、SP、SI和DI8个属于字节类型
寄存器操作数的类型是由其名决定的，不同类型的不能混用，CS不能作为目标操作数，段寄存器只能在少许几条指令中可以使用。
存储寻址器
指令中的操作数是操作对象在内存中的存放地址的寻址方式叫存储器寻址方式，操作对象实质是内存地址所对应的存储单元的内容。内存的地址由段地址和偏移地址确定的，段地址的确定是在确定用哪个段寄存器，段寄存器除非在指令中特别指出，其他情况均为默认的。
直接寻址
存储器操作数的内存偏移地址是一个数值的寻址方式叫直接寻址方式。直接有常数、常量或常量表达式加[]以及变量名或变量名加减常量形成的表达式
MOV AX, [2000H]
MOV BX, [N]       ;N为常量名
MOV CX, ES:[2+3*5]
MOV DX, A         ;A为常量名
MOV SI，A+5       ;A为变量名，变量名加减依旧为变量
寄存器间接寻址
存储器操作数的内存偏移地址部分是由一个寄存器中的内容作为操作数地址的寻址方式叫间接寻址方式，即EA=R。

指令系统

指令的要点包括助记符、基本格式、功能、数据类型、寻址方式和对标志位的影响。这6个要点熟悉了，说明指令已基本掌握，当然还需要灵活运用，即用它来编写程序。
8086/88 共有300多条机器指令，对应300多条汇编指令，后面的讨论是在汇编指令助记符一致及功能一致的情况下对汇编指令进行归类，所以只有97条指令。
指令按功能可以分为7 大类：传送类指令、算术运算类指令、位运算类指令、I/O类指令、CPU控制类指令、串操作类指令和转移类指令。下面按照此7 大类对指令系统进行介绍。
指令合法性判断主要从以下三个方面着手：
1. 书写格式方面。如单词拼写、标点符号、间隔等。
2. 数据类型方面。如数据类型是否匹配、是否明确。两个操作数类型是否匹配又有三点：①两数数据类型均明确，则必须一致；②两数数据类型均不明确，则必须进行类型说明（用BYTE PTR或 WORD PTR）；③两数数据类型一方明确，另一方不明确，则一定匹配，不明确方按明确方处理。如是单操作数则要求数据类型明确。
3. 寻址方式方面。如操作数的寻址方式是否合法、两操作数寻址方式是否相匹配。
本书介绍指令系统所用的一些英文缩写如下。
SR：段寄存器
UR：通用寄存器，UR8：8位通用寄存器，UR16：16位通用寄存器
N或n：立即数 F：标志位
M或 [EA]：存储器操作数 /：或
B：字节，W：字，DW：双字
DST：目的操作数，SRC：源操作数，OD：操作数
